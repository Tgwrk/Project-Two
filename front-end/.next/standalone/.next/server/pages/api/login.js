"use strict";(()=>{var e={};e.id=994,e.ids=[994],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9648:e=>{e.exports=import("axios")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},1688:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{config:()=>d,default:()=>l,routeModule:()=>c});var s=n(6794),o=n(6114),a=n(6249),i=n(8292),u=e([i]);i=(u.then?(await u)():u)[0];let l=(0,a.l)(i,"default"),d=(0,a.l)(i,"config"),c=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/login",pathname:"/api/login",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},8612:(e,t,n)=>{n.d(t,{Z:()=>s});let r=require("next-iron-session");function s(e){return(0,r.withIronSession)(e,{password:process.env.SECRET_COOKIE_PASSWORD,cookieName:"clm.mw",cookieOptions:{secure:!0}})}},8292:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{default:()=>i});var s=n(8612),o=n(9648),a=e([o]);o=(a.then?(await a)():a)[0];let i=(0,s.Z)(async(e,t)=>{let{username:n,password:r}=await e.body,s=process.env.BACKEND_API_HOST+"/api/login";try{let a=await o.default.post(s,{username:n,password:r});if(200===a.status){let{user:n,api_token:r}=a.data;return e.session.set("user",n),e.session.set("api_token",r),await e.session.save(),t.json({logged_in:!0})}let i=a.data.message,u=a.data.errors;return t.json({status:i,logged_in:!1,errors:u})}catch(r){let e="Something went wrong",n=null;return console.log(r),r.response&&(e=r.response.data.message,n=r.response.data.errors),t.json({logged_in:!1,status:e,errors:n})}});r()}catch(e){r(e)}})},6114:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(n||(n={}))},6794:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=1688);module.exports=n})();